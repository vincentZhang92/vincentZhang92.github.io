---
sidebar: false
---

# Vuepress - lastUpdated

## 问题描述

在使用 Github Action 自动部署 Vuepress 时，配置`last-updated`总是出现问题，记录问题修复过程。

## 问题一 - 时间格式

初始的`last-updated`时间格式对于我来说看起来不是很适应，所以使用[dayjs](https://www.npmjs.com/package/dayjs)进行格式化。

::: tip 注意
如果你同样使用 Github Action 自动部署，需要注意修改`dayjs`的时区
:::

```js
// .vuepress/config.js
dayjs.extend(utc);
dayjs.extend(timezone);

module.exports = {
  // ...
  plugins: [
    '@vuepress/last-updated',
    {
      transformer: timestamp => {
        return dayjs(timestamp).tz('Asia/Shanghai').format('YYYY-MM-DD HH:mm:ss');
      }
    }
  ]
};
```

## 问题二 - 时间不符合预期

在本地开发环境中，各页面的`last-updated`展示都很正常，但是使用 Github Action 自动部署后，所有的`last-updated`都变成发版时间，而不是原页面的最后编辑时间。

问题原因是自动部署使用的`actions/checkout`默认获取提交的次数是 1
